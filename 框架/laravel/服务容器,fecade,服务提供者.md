##### 前言
本篇文章主要关于`laravel`的服务容器，服务提供者以及`Facade`。

<br>

##### 服务容器

服务容器是`laravel`的核心概念。

服务容器就像一个大盒子，里面可以用来放置各种各样的东西，在这里，往这个盒子里放的是服务。

服务可以理解为一个功能，比如发送短信，发送推送等。

往服务容器里放置服务的动作叫注册，也可以叫绑定。一个功能在开发完成之后，还必须要完成注册才能使用。绑定区分为许多种，官方文档中有详细的介绍。

<br>

##### Facade
所有的`facade`都要继承`Illuminate\Suuport\Facades\Facade`。

`Facade` 起到的作用和辅助函数没有区别，或者可以说，`facade` 就是另外一种形式的辅助函数，框架提供一些 facades 以供调用，位于 `Illuminate\Support\Facades\xxx` ，实际上辅助函数内部就是调用 `facade` 。

按照官方文档的说法，`facade` 是底层类的代理。实际的逻辑操作是底层类提供的，`facade` 干的事情就是在调用和实现之间加了一个中转站，由它来进行分配，根据不同的调用请求，最后返回不同的服务。

**在这个分配过程中，既可以按照默认注册的对应关系来返回对应的逻辑实现，也可以在这里加入一些额外的东西**，弹性就在这里了。

<br>

##### 服务提供者

所有的服务提供者都要继承`Illuminate\Support\ServiceProvider`，必然包含两个方法`register`，`boot`。

在`register`中将服务绑定到服务容器中。

`boot`主要注意它的调用时机，是在所有的服务注册完成之后才被调用，这意味着，`boot`中可以使用框架中注册的所有服务。

服务提供者本身也需要注册，注册位置是在`config\app.php`中的`$provider`。

服务提供者本身也不包含具体的执行逻辑，和 `facade` 的角色类似，也是一个中间角色，服务提供者主要的作用就是完成服务的注册，将接口和实现绑定。所以，在服务容器中必然存在着一个类似 hash 表，用来保存接口和实现逻辑的对应关系。

<br>