### 单表查询操作

<hr>

本章节主要说明如何在单表中进行查询，仅做最实用的说明，更多详情需查看官方源文档。

[Mysql源文档](https://dev.mysql.com/doc/refman/8.0/en/select.html)

**语法：**
```
SELECT
    select_expr [,select_expr] ... 
    [FROM table_references] 
    [WHERE where_condition] 
    [GROUP BY {col_name | expr | position},...]
    [HAVING where_condition]
    [ORDER BY {col_name | expr | position} [ASC | DESC]]
    [LIMIT {[offset,] row_count | row_count OFFSET offset}]
```

**说明：**
* 大写为关键字，必不可少

<br>
<br>

### 查询条件

<hr>

此部分用来说明查询字段，表名为 `student`，表结构为：

id|name|age
-|-|-
1|bob|10

#### where条件

where 用来限定查询条件，也是最常用的限定语句，返回的数据都是符合限定条件，数据库的实际操作过程就是将数据库中的数据一条条拿出来与限定条件进行比对，如果符合条件就放入返回表然后下一条，不符合则直接下一条，直到比较完所有的数据，最底层的操作就是如此简单直白。

```
    #查询单一字段
    select name from student where id=1;

    返回结果同样为一张表，查询字段是什么，返回表的表头就是什么
    ------
    |name|
    ------
    |tim |
    ------

    可以给返回表的表头自定义名字，使用关键字 as 
    select name as a from student where id=1;

    -----
    |a  |
    -----
    |tim|
    -----

    #查询所有字段, * 是一种简写形式，代表 student 表中的所有字段，下面两种形式得到的结果一致
    select * from student where id=1;
    select id,name,age from student where id=1;

    返回表
    ------------------
    |id | name | age |
    ------------------
    | 1 |  bob | 10  |
    ------------------
```

#### group条件

group 条件用来进行分组，为了方便演示，`student` 表需要做一些相应的改变

|id|name|age|tag|
-|-|-|-
1|t1|10|1|
2|t2|11|1|
3|t3|12|2|

```
    # 按tag进行分组
    select * from student group by tag; #报错
    select tag from student group by tag; #OK
    select max(age),tag from student group by tag; #OK

    ### 见下说明1

    select * from student group by tag;

    上面的语句如果没有 only_full_group_by 限制，将返回两种可能性结果
    ------------------------
    |id | name | age | tag |
    ------------------------
    |1  |  t1  |  10 |  1  |
    ------------------------
    |3  |  t3  |  12 |  2  |
    ------------------------
    或者
    ------------------------
    |id | name | age | tag |
    ------------------------
    |2  |  t2  |  11 |  1  |
    ------------------------
    |3  |  t3  |  12 |  2  |
    ------------------------

    ### 见下说明2
    
```
说明1
>我搭建的实验环境，MySQL是8.0版本，默认的 `sql_mode=only_full_group_by`，`only_full_group_by` 的要求就是如果 select list 中的 column 如果未在 group by 中声明，就会报错。以前版本并不是这样，这样改变的原因是为了解决一个不确定性问题

说明2
>因为 tag = 1 时对应的有两种情况，而 MySQL 在这个时候无法返回一个确定的结果，可能是两种情况中的任何一种，这样就可能会引发错误，如果逻辑中依赖 id、name、age 字段，加上 only_full_group_by 的限制就是为了消除这种不确定性，select list 中的每一个值都必须加上明确的限制使的最终的结果只有一种，比如 max(age) ,在上面的示例中虽然 group by 并没有带上 age，但是 max(age) 函数限制了只可能有一种结果，因而不会报错。另外明确的限制也可以提升性能，毕竟少了一些可能性，这部分了解即可。
